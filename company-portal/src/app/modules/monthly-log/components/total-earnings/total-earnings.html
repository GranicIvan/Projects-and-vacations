<div style="background: var(--gray-900); padding: 2rem; margin-bottom: 2rem; border-radius: 8px">
  <h2 style="color: white; margin: 0 0 1rem 0">Total Earnings by Year</h2>

  <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center">
    <input
      type="number"
      placeholder="Start Year (YYYY)"
      [(ngModel)]="startYear"
      style="
        padding: 0.5rem 1rem;
        border-radius: 4px;
        border: 1px solid var(--french-violet);
        background: white;
        color: #333;
        font-size: 1rem;
        min-width: 200px;
      "
    />

    <input
      type="number"
      placeholder="End Year (YYYY)"
      [(ngModel)]="endYear"
      style="
        padding: 0.5rem 1rem;
        border-radius: 4px;
        border: 1px solid var(--french-violet);
        background: white;
        color: #333;
        font-size: 1rem;
        min-width: 200px;
      "
    />

    <button
      (click)="loadYearlyEarnings()"
      style="
        padding: 0.5rem 1.5rem;
        background: var(--french-violet);
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
      "
    >
      Load Yearly Earnings
    </button>
  </div>

  <table style="width: 100%; border-collapse: collapse; background: white">
    <thead>
      <tr style="background: var(--gray-900)">
        <th
          style="
            color: white;
            padding: 0.75rem;
            text-align: left;
            border-bottom: 2px solid var(--french-violet);
          "
        >
          Year
        </th>
        <th
          style="
            color: white;
            padding: 0.75rem;
            text-align: left;
            border-bottom: 2px solid var(--french-violet);
          "
        >
          Total Hours
        </th>
        <th
          style="
            color: white;
            padding: 0.75rem;
            text-align: left;
            border-bottom: 2px solid var(--french-violet);
          "
        >
          Total Earnings
        </th>
      </tr>
    </thead>

    <tbody>
      @if (yearlyEarnings.length) {
        @for (earning of yearlyEarnings; track earning.yearMonth) {
          <tr
            [ngStyle]="{
              background: $index % 2 === 0 ? '#f8f9fa' : 'white',
              'border-bottom': '1px solid #e9ecef',
            }"
          >
            <td style="padding: 0.75rem; color: #333">{{ earning.yearMonth | date: 'yyyy-MM' }}</td>
            <td style="padding: 0.75rem; color: #333">{{ earning.hoursWorked }}</td>
            <td style="padding: 0.75rem; color: #333">${{ earning.monthlyEarnings }}</td>
          </tr>
        }
        <tr style="background: var(--french-violet); font-weight: bold">
          <td style="padding: 0.75rem; color: white; text-align: right">GRAND TOTALS:</td>
          <td style="padding: 0.75rem; color: white">{{ getGrandTotalHours() }} hours</td>
          <td style="padding: 0.75rem; color: white">${{ getGrandTotalEarnings().toFixed(2) }}</td>
        </tr>
      } @else {
        <tr>
          <td colspan="3" style="padding: 1rem; text-align: center; color: #666">
            No yearly earnings data to show. Please enter year range and click "Load Yearly
            Earnings".
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>
