<div style="background: var(--gray-900); padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
    <h2 style="color: white; margin: 0 0 1rem 0;">Monthly Earnings Per Employee</h2>

    <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
        <input
            type="month"
            [(ngModel)]="selectedYearMonth"
            style="
                padding: 0.5rem 1rem;
                border-radius: 4px;
                border: 1px solid var(--french-violet);
                background: white;
                color: #333;
                font-size: 1rem;
                min-width: 200px;
            "
        />
        
        <button 
            (click)="filterByYearMonth()"
            style="
                padding: 0.5rem 1.5rem;
                background: var(--french-violet);
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 500;
            "
        >
            Filter by Year-Month
        </button>

        <input
            type="number"
            placeholder="YYYY"            
            [(ngModel)]="yearOption"
            style="
                padding: 0.5rem 1rem;
                border-radius: 4px;
                border: 1px solid var(--french-violet);
                background: white;
                color: #333;
                font-size: 1rem;
                min-width: 200px;
            "
        />
        
        <button 
            (click)="filterByYear()"
            style="
                padding: 0.5rem 1.5rem;
                background: var(--french-violet);
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 500;
            "
        >
            Filter by Year
        </button>
    </div>

    <table style="width: 100%; border-collapse: collapse; background: white">
      <thead>
        <tr style="background: var(--gray-900)">
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            ID
          </th>
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            First Name
          </th>
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            Last Name
          </th>
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            Email
          </th>
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            Total Hours
          </th>
          <th
            style="
              color: white;
              padding: 0.75rem;
              text-align: left;
              border-bottom: 2px solid var(--french-violet);
            "
          >
            Total Earnings
          </th>
        </tr>
      </thead>

      <tbody>
        @if (employeeEarnings.length) {
        @for (earning of employeeEarnings; track earning.id) {
            <tr
                [ngStyle]="{
                    background: $index % 2 === 0 ? '#f8f9fa' : 'white',
                    'border-bottom': '1px solid #e9ecef',
                }"
            >
                <td style="padding: 0.75rem; color: #333">{{ earning.id }}</td>
                <td style="padding: 0.75rem; color: #333">{{ earning.firstName }}</td>
                <td style="padding: 0.75rem; color: #333">{{ earning.lastName }}</td>
                <td style="padding: 0.75rem; color: #333">{{ earning.email }}</td>
                <td style="padding: 0.75rem; color: #333">{{ earning.hoursWorked }}</td>
                <td style="padding: 0.75rem; color: #333">${{ earning.monthlyEarnings.toFixed(2) }}</td>
            </tr>
        }
        <tr style="background: var(--french-violet); font-weight: bold;">
          <td colspan="4" style="padding: 0.75rem; color: white; text-align: right;">
            GRAND TOTALS:
          </td>
          <td style="padding: 0.75rem; color: white">
            {{ getGrandTotalHours() }} hours
          </td>
          <td style="padding: 0.75rem; color: white">
            ${{ getGrandTotalEarnings().toFixed(2) }}
          </td>
        </tr>
        } @else {
          <tr>
            <td colspan="6" style="padding: 1rem; text-align: center; color: #666">
              No earnings data to show. Please select a year-month or year and click the filter button.
            </td>
          </tr>
        }
      </tbody>
    </table>
</div>
